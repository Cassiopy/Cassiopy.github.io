<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#020202">
    <title>Fiesta de Navidad</title>
    <link rel="icon" type="image/png" href="favicon.png">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700;900&family=Montserrat:wght@300;400;500;600;700&family=Great+Vibes&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <!-- Cover/Splash screen modal -->
    <div id="cover-modal" class="cover-modal">
      <div class="cover-content">
        <h1 class="cover-title">Fiesta de</h1>
        <h1 class="cover-title cover-highlight">Navidad</h1>
        <p class="cover-subtitle" id="cover-greeting">[nombres] te invitamos a celebrar</p>
        <button id="enter-btn" class="enter-btn">Entrar</button>
      </div>
    </div>

    <!-- Decorative stars background -->
    <div class="stars-bg">
      <div class="star star-1"></div>
      <div class="star star-2"></div>
      <div class="star star-3"></div>
      <div class="star star-4"></div>
      <div class="star star-5"></div>
      <div class="star star-6"></div>
      <div class="star star-7"></div>
      <div class="star star-8"></div>
    </div>

    <!-- Music player -->
    <div class="music-player">
      <audio id="bg-music" loop playsinline>
        <source src="Dua Lipa - Levitating Featuring DaBaby (Official Music Video) - Dua Lipa.mp3" type="audio/mpeg">
        Tu navegador no soporta el elemento de audio.
      </audio>
      <button id="music-btn" class="music-btn" title="Reproducir mÃºsica">ğŸµ</button>
      <input id="volume-slider" class="volume-slider" type="range" min="0" max="100" value="30">
    </div>

    <main class="invite-container">
      <!-- Header with title -->
      <section class="header-section">
        <div class="header-stars">
          <span class="header-star">âœ¦</span>
          <span class="header-star">âœ¦</span>
          <span class="header-star">âœ¦</span>
        </div>
        
        <h1 class="title-main">Fiesta de</h1>
        <h1 class="title-main title-highlight">Navidad</h1>
        
        <p class="subtitle-text" id="greeting">Te invitamos a celebrar,</p>
        
        <div class="header-stars">
          <span class="header-star">âœ¦</span>
          <span class="header-star">âœ¦</span>
          <span class="header-star">âœ¦</span>
        </div>
      </section>

      <!-- Event details section -->
      <section class="details-section">
        <div class="detail-item">
          <span class="detail-icon">ğŸ“…</span>
          <div>
            <p class="detail-label">Fecha</p>
            <p class="detail-value">24 de Diciembre</p>
          </div>
        </div>

        <div class="detail-item">
          <span class="detail-icon">ğŸ•–</span>
          <div>
            <p class="detail-label">Hora</p>
            <p class="detail-value">18:00 hs</p>
          </div>
        </div>

        <div class="detail-item">
          <span class="detail-icon">ğŸ“</span>
          <div>
            <p class="detail-label">Lugar</p>
            <p class="detail-value">Alkimia del RÃ­o, Los CastaÃ±os 279, Potrero de los Funes</p>
          </div>
        </div>
      </section>

      <!-- Map section -->
      <section class="map-section">
        <h2 class="section-title">Â¿CÃ³mo llegar?</h2>
        <a href="https://maps.app.goo.gl/THjNdM86CqrpGS9E7" target="_blank" class="map-link">
          ğŸ“ Abrir en Google Maps
        </a>
        <iframe 
          src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d1677.5169206999995!2d-66.22800160000001!3d-33.21498690000001!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x95d4150067ba63d3%3A0xc49814a3c24f9549!2sAlkimia%20del%20R%C3%ADo!5e0!3m2!1ses!2sar!4v1700000000000" 
          loading="lazy" 
          referrerpolicy="no-referrer-when-downgrade"
          class="map-iframe">
        </iframe>
      </section>

      <!-- Photos section -->
      <section class="photos-section">
        <h2 class="section-title">ğŸ“¸ Compartir Fotos</h2>
        <p class="section-description">GuardÃ¡ las fotos de la fiesta en nuestra carpeta compartida pÃºblica:</p>
        <a href="https://drive.google.com/drive/folders/10lwMtG7bVBI4earde9lrx412ZOsm0m42?usp=sharing" target="_blank" class="cta-button">
          ğŸ“ Abrir Google Drive
        </a>
      </section>

      <!-- Activities section -->
      <section class="activities-section">
        <h2 class="section-title">ğŸ‰ Actividades</h2>
        <p class="activities-description">Te esperamos para pasar la tarde y noche en la pileta con mÃºsica, karaoke, videojuegos y jugando unas rifas.</p>
        
        <div class="carousel-container">
          <button class="carousel-btn carousel-btn-prev" id="carousel-prev">â®</button>
          
          <div class="carousel-item">
            <div class="carousel-image-wrapper">
              <img src="Pileta.jpg" alt="Pileta" class="carousel-image" id="carousel-image">
            </div>
            <div class="carousel-info">
              <h3 class="carousel-title" id="carousel-title">ğŸŠ Pileta</h3>
            </div>
          </div>
          
          <button class="carousel-btn carousel-btn-next" id="carousel-next">â¯</button>
        </div>
      </section>

      <!-- Footer -->
      <footer class="footer-section">
        <p class="footer-text">Â¡Te esperamos!</p>
        <p class="footer-hosts">Sofi y Maxi</p>
      </footer>
    </main>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

    <script>
      // Personalization: read ?to=Name
      function getParam(name) {
        const url = new URL(window.location.href);
        return url.searchParams.get(name);
      }

      // Get name from URL
      const toName = getParam('to') || 'todos';
      const decodedName = decodeURIComponent(toName);
      
      // Detect plural: if there are spaces in the name, it means multiple names
      const isPlural = decodedName.includes(' ') || decodedName === 'todos';
      const verb = isPlural ? 'los invitamos' : 'te invitamos';
      const greetingText = `${decodedName}, ${verb} a celebrar`;
      
      // Set greeting in both cover and main page
      document.getElementById('cover-greeting').textContent = greetingText;
      document.getElementById('greeting').textContent = greetingText;

      // Music player
      const bgMusic = document.getElementById('bg-music');
      const musicBtn = document.getElementById('music-btn');
      const volumeSlider = document.getElementById('volume-slider');
      const coverModal = document.getElementById('cover-modal');
      const enterBtn = document.getElementById('enter-btn');

      // Set initial volume
      bgMusic.volume = 0.3;

      // Enter button clicked - hide cover and start music
      enterBtn.addEventListener('click', () => {
        coverModal.classList.add('hidden');
        window.scrollTo({ top: 0, behavior: 'smooth' });
        bgMusic.muted = false;
        // Play music after a short delay to sync with animation
        setTimeout(() => {
          bgMusic.play().then(() => {
            console.log('Audio playing');
            musicBtn.textContent = 'â¸ï¸';
          }).catch(err => {
            console.log('Play error:', err);
          });
        }, 300);
      });

      musicBtn.addEventListener('click', () => {
        if (bgMusic.paused) {
          bgMusic.muted = false;
          bgMusic.play().catch(err => console.log('Play error:', err));
          musicBtn.textContent = 'â¸ï¸';
        } else {
          bgMusic.pause();
          musicBtn.textContent = 'ğŸµ';
        }
      });

      volumeSlider.addEventListener('input', () => {
        bgMusic.volume = volumeSlider.value / 100;
      });

      // Update button state on play/pause
      bgMusic.addEventListener('play', () => {
        musicBtn.textContent = 'â¸ï¸';
      });
      bgMusic.addEventListener('pause', () => {
        musicBtn.textContent = 'ğŸµ';
      });

      // Carousel functionality
      const carouselPrev = document.getElementById('carousel-prev');
      const carouselNext = document.getElementById('carousel-next');
      const carouselImage = document.getElementById('carousel-image');
      const carouselTitle = document.getElementById('carousel-title');
      
      const activities = [
        { image: 'Pileta.jpg', title: 'ğŸŠ Pileta' },
        { image: 'Mesa.jpg', title: 'ğŸ® Juegos de mesa' },
        { image: 'Juegos.jpeg', title: 'ğŸ® Videojuegos' },
        { image: 'Karaoke.jpeg', title: 'ğŸ¤ Karaoke' },
        { image: 'Potrero.jpeg', title: 'ğŸŒ¿ Potrero' }
      ];
      
      let currentSlide = 0;

      function updateCarousel() {
        const activity = activities[currentSlide];
        carouselImage.src = activity.image;
        carouselImage.alt = activity.title;
        carouselTitle.textContent = activity.title;
      }

      carouselPrev.addEventListener('click', () => {
        currentSlide = (currentSlide - 1 + activities.length) % activities.length;
        updateCarousel();
      });

      carouselNext.addEventListener('click', () => {
        currentSlide = (currentSlide + 1) % activities.length;
        updateCarousel();
      });

    </script>
  </body>
</html>
